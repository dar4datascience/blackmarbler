[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Robert Marty. Author, maintainer. Gabriel Stefanini Vicente. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Marty R, Stefanini Vicente G (2024). blackmarbler: Black Marble Data Statistics. R package version 0.1.2, https://worldbank.github.io/blackmarbler/.","code":"@Manual{,   title = {blackmarbler: Black Marble Data and Statistics},   author = {Robert Marty and Gabriel {Stefanini Vicente}},   year = {2024},   note = {R package version 0.1.2},   url = {https://worldbank.github.io/blackmarbler/}, }"},{"path":[]},{"path":"/index.html","id":"comments","dir":"","previous_headings":"","what":"Comments","title":"Black Marble Data and Statistics","text":"logic extracting bm_extract, 1 file drops geometry exact_extracts many first extracts drops geometry. bug?","code":""},{"path":"/index.html","id":"next-steps","dir":"","previous_headings":"","what":"Next steps","title":"Black Marble Data and Statistics","text":"performance tuning migrate cli package [! ] Fix Docs, Roxygen2 Quarto Documentation Overview (Introduction) GDP Correlation Assessing Quality Flags Differences Aggregation Functions Transportation Infrastructure let user know many tiles gonna process cause timely test bm_extract (next) [X!] test bm_raster test quality flags bm raster test check logic single roi_df$date <- NULL extact extract logic test using different balck marble variable extraction (VNP46A3 FAILS ) multiple vs single dates single date multiple dates (save multiple files) Add pixels function","code":""},{"path":"/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Black Marble Data and Statistics","text":"BlackMarbleR R package provides simple way use nighttime lights data NASA’s Black Marble. Black Marble NASA Earth Science Data Systems (ESDS) project provides product suite daily, monthly yearly global nighttime lights. package automates process downloading relevant tiles NASA LAADS DAAC cover region interest, converting mosaicing raw files (HDF5 format) georeferenced rasters. Installation Bearer token Setup Make raster Make raster stack across multiple time periods Make map Make figure trends nighttime lights Workflow update data Functions Required Arguments Optional Arguments Argument bm_extract Black Marble Resources","code":""},{"path":"/index.html","id":"installation-","dir":"","previous_headings":"","what":"Installation","title":"Black Marble Data and Statistics","text":"package can installed via CRAN. install development version Github:","code":"install.packages(\"blackmarbler\") # install.packages(\"devtools\") devtools::install_github(\"worldbank/blackmarbler\")"},{"path":"/index.html","id":"bearer-token-","dir":"","previous_headings":"","what":"Bearer Token","title":"Black Marble Data and Statistics","text":"function requires using Bearer Token; obtain token, follow steps: Go NASA LAADS Archive Click “Login” (bottom top right); create account needed. Click “See wget Download Command” (bottom near top, middle) clicking, see text can used download data. “Bearer” token long string red. logging , show bearer token red instead INSERT_DOWNLOAD_TOKEN_HERE. Sometimes, logging , NASA website redirect another part website. obtain bearer token, just navigate NASA LAADS Archive logging .","code":""},{"path":[]},{"path":"/index.html","id":"setup-","dir":"","previous_headings":"Usage","what":"Setup","title":"Black Marble Data and Statistics","text":"downloading extracting Black Marble data, first load packages, define NASA bearer token, define region interest.","code":"#### Setup # Load packages library(blackmarbler) library(geodata) library(sf) library(raster) library(ggplot2)  #### Define NASA bearer token bearer <- \"BEARER-TOKEN-HERE\"  ### ROI # Define region of interest (roi). The roi must be (1) an sf polygon and (2) # in the WGS84 (epsg:4326) coordinate reference system. Here, we use the # getData function to load a polygon of Ghana roi_sf <- gadm(country = \"GHA\", level=1, path = tempdir()) |> st_as_sf()"},{"path":"/index.html","id":"make-raster-of-nighttime-lights-","dir":"","previous_headings":"Usage","what":"Make raster of nighttime lights","title":"Black Marble Data and Statistics","text":"example shows making daily, monthly, annual rasters nighttime lights Ghana.","code":"### Daily data: raster for February 5, 2021 r_20210205 <- bm_raster(roi_sf = roi_sf,                         product_id = \"VNP46A2\",                         date = \"2021-02-05\",                         bearer = bearer)  ### Monthly data: raster for October 2021 r_202110 <- bm_raster(roi_sf = roi_sf,                       product_id = \"VNP46A3\",                       date = \"2021-10-01\", # The day is ignored                       bearer = bearer)  ### Annual data: raster for 2021 r_2021 <- bm_raster(roi_sf = roi_sf,                     product_id = \"VNP46A4\",                     date = 2021,                     bearer = bearer)"},{"path":"/index.html","id":"make-raster-stack-of-nighttime-lights-across-multiple-time-periods-","dir":"","previous_headings":"Usage","what":"Make raster stack of nighttime lights across multiple time periods","title":"Black Marble Data and Statistics","text":"extract data multiple time periods, add multiple time periods date. function return raster stack, raster band corresponds different date. code provides examples getting data across multiple days, months, years.","code":"#### Daily data in March 2021 r_daily <- bm_raster(roi_sf = roi_sf,                      product_id = \"VNP46A3\",                      date = seq.Date(from = ymd(\"2021-03-01\"), to = ymd(\"2021-03-31\"), by = \"day\"),                      bearer = bearer)  #### Monthly aggregated data in 2021 and 2022 r_monthly <- bm_raster(roi_sf = roi_sf,                        product_id = \"VNP46A3\",                        date = seq.Date(from = ymd(\"2021-01-01\"), to = ymd(\"2022-12-01\"), by = \"month\"),                        bearer = bearer)  #### Yearly aggregated data in 2012 and 2021 r_annual <- bm_raster(roi_sf = roi_sf,                       product_id = \"VNP46A4\",                       date = 2012:2021,                       bearer = bearer)"},{"path":"/index.html","id":"map-of-nighttime-lights-","dir":"","previous_headings":"Usage","what":"Map of nighttime lights","title":"Black Marble Data and Statistics","text":"Using one rasters, can make map nighttime lights","code":"#### Make raster r <- bm_raster(roi_sf = roi_sf,                product_id = \"VNP46A3\",                date = \"2021-10-01\",                bearer = bearer)  #### Prep data r <- r |> mask(roi_sf)  r_df <- rasterToPoints(r, spatial = TRUE) |> as.data.frame() names(r_df) <- c(\"value\", \"x\", \"y\")  ## Remove very low values of NTL; can be considered noise r_df$value[r_df$value <= 2] <- 0  ## Distribution is skewed, so log r_df$value_adj <- log(r_df$value+1)  ##### Map p <- ggplot() +   geom_raster(data = r_df,   aes(x = x, y = y,   fill = value_adj)) +   scale_fill_gradient2(low = \"black\",                        mid = \"yellow\",                        high = \"red\",                        midpoint = 4.5) +   labs(title = \"Nighttime Lights: October 2021\") +   coord_quickmap() +   theme_void() +   theme(plot.title = element_text(face = \"bold\", hjust = 0.5),   legend.position = \"none\")"},{"path":"/index.html","id":"trends-over-time-","dir":"","previous_headings":"Usage","what":"Trends over time","title":"Black Marble Data and Statistics","text":"can use bm_extract function observe changes nighttime lights time. bm_extract function leverages exactextractr package aggregate nighttime lights data polygons. show trends annual nighttime lights data across Ghana’s first administrative divisions.","code":"#### Extract annual data ntl_df <- bm_extract(roi_sf = roi_sf,                      product_id = \"VNP46A4\",                      date = 2012:2022,                      bearer = bearer)  #### Trends over time ntl_df |>   ggplot() +   geom_col(aes(x = date,   y = ntl_mean),   fill = \"darkorange\") +   facet_wrap(~NAME_1) +   labs(x = NULL,        y = \"NTL Luminosity\",        title = \"Ghana Admin Level 1: Annual Average Nighttime Lights\") +   scale_x_continuous(labels = seq(2012, 2022, 4),                      breaks = seq(2012, 2022, 4)) +   theme_minimal() +   theme(strip.text = element_text(face = \"bold\"))"},{"path":"/index.html","id":"workflow-to-update-data-","dir":"","previous_headings":"Usage","what":"Workflow to update data","title":"Black Marble Data and Statistics","text":"users may want monitor near-real-time changes nighttime lights. example, daily Black Marble nighttime lights data updated regularly, data available roughly week delay; use cases may require examining trends daily nighttime lights data new data becomes available. shows example code regularly run produce updated daily dataset nighttime lights. code produces dataframe nighttime lights date, average nighttime lights Ghana’s 1st administrative division produced. code check whether data already downloaded/extracted specific date, download/extract new data.","code":"# Create directories to store data dir.create(file.path(getwd(), \"bm_files\")) dir.create(file.path(getwd(), \"bm_files\", \"daily\"))  # Extract daily-level nighttime lights data for Ghana's first administrative divisions. # Save a separate dataset for each date in the `\"~/Desktop/bm_files/daily\"` directory. # The code extracts data from January 1, 2023 to today. Given that daily nighttime lights # data is produced on roughly a week delay, the function will only extract data that exists; # it will skip extracting data for dates where data has not yet been produced by NASA Black Marble. bm_extract(roi_sf = roi_sf,            product_id = \"VNP46A2\",            date = seq.Date(from = ymd(\"2023-01-01\"), to = Sys.Date(), by = 1),            bearer = bearer,            output_location_type = \"file\",            file_dir = file.path(getwd(), \"bm_files\", \"daily\"))  # Append daily-level datasets into one file file.path(getwd(), \"bm_files\", \"daily\") |>   list.files(pattern = \"*.Rds\",   full.names = T) |>   map_df(readRDS) |>   saveRDS(file.path(getwd(), \"bm_files\", \"ntl_daily.Rds\"))"},{"path":[]},{"path":"/index.html","id":"functions-","dir":"","previous_headings":"Functions and arguments","what":"Functions","title":"Black Marble Data and Statistics","text":"package provides two functions. bm_raster produces raster Black Marble nighttime lights. bm_extract produces dataframe aggregated nighttime lights region interest (e.g., average nighttime lights within US States). functions take following arguments:","code":""},{"path":"/index.html","id":"required-arguments-","dir":"","previous_headings":"Functions and arguments","what":"Required arguments","title":"Black Marble Data and Statistics","text":"roi_sf: Region interest; sf polygon. Must WGS 84 (epsg:4326) coordinate reference system. bm_extract, aggregates nighttime lights within polygon roi_sf. product_id: One following: \"VNP46A1\": Daily (raw) \"VNP46A2\": Daily (corrected) \"VNP46A3\": Monthly \"VNP46A4\": Annual date: Date raster data. Entering one date produce raster. Entering multiple dates produce raster stack. product_ids \"VNP46A1\" \"VNP46A2\", date (eg, \"2021-10-03\"). product_id \"VNP46A3\", date year-month (e.g., \"2021-10-01\", day ignored, \"2021-10\"). product_id \"VNP46A4\", year date (e.g., \"2021-10-01\", month day ignored, 2021). bearer: NASA bearer token. instructions create token, see .","code":""},{"path":"/index.html","id":"optional-arguments-","dir":"","previous_headings":"Functions and arguments","what":"Optional arguments","title":"Black Marble Data and Statistics","text":"variable: Variable used create raster (default: NULL). information variable choices, see ; VNP46A1, see Table 3; VNP46A2 see Table 6; VNP46A3 VNP46A4, see Table 9. NULL, uses following default variables: product_id \"VNP46A1\", uses DNB_At_Sensor_Radiance_500m. product_id \"VNP46A2\", uses Gap_Filled_DNB_BRDF-Corrected_NTL. product_ids \"VNP46A3\" \"VNP46A4\", uses NearNadir_Composite_Snow_Free. quality_flag_rm: Quality flag values use set values NA. pixel quality flag value, low quality values can removed. Values set NA value ther quality_flag_rm vector. (Default: NULL). 0: High-quality, Persistent nighttime lights 1: High-quality, Ephemeral nighttime Lights 2: Poor-quality, Outlier, potential cloud contamination, issues 0: Good-quality, number observations used composite larger 3 1: Poor-quality, number observations used composite less equal 3 2: Gap filled NTL based historical data check_all_tiles_exist: Check whether Black Marble nighttime light tiles exist region interest. Sometimes tiles available, full region interest may covered. TRUE, skips cases tiles available. (Default: TRUE). interpol_na: data one date downloaded, whether interpolate NA values rasters using raster::approxNA function. Additional arguments raster::approxNA function can also passed bm_raster/bm_extract (eg, method, rule, f, ties, z, NA_rule). (Default: FALSE). output_location_type: output stored (default: r_memory). Either: r_memory function return output R file function export data file. bm_raster, .tif file saved; bm_extract, .Rds file saved. file saved date. Consequently, date = c(2018, 2019, 2020), three datasets saved: one year. Saving dataset date can facilitate re-running function later downloading data dates data downloaded. output_location_type = \"file\", following arguments can used: file_dir: directory data exported (default: NULL, working directory used) file_prefix: Prefix add file saved. file saved following: [file_prefix][product_id]_t[date].[tif/Rds] file_skip_if_exists: Whether function first check wither file already exists, skip downloading extracting data data date file already exists (default: TRUE). function first run date = c(2018, 2019, 2020), later run date = c(2018, 2019, 2020, 2021), function download/extract data 2021. Skipping existing files can facilitate re-running function later date download recent data. …: Additional arguments raster::approxNA, interpol_na = TRUE","code":""},{"path":"/index.html","id":"argument-for-bm_extract-only-","dir":"","previous_headings":"Functions and arguments","what":"Argument for bm_extract only","title":"Black Marble Data and Statistics","text":"aggregation_fun: vector functions aggregate data (default: \"mean\"). exact_extract function exactextractr package used aggregations; parameter passed fun argument exactextractr::exact_extract. add_n_pixels: Whether add variable indicating number nighttime light pixels used compute nighttime lights statistics (eg, number pixels used compute average nighttime lights). TRUE, adds three values: n_non_na_pixels (number non-NA pixels used computing nighttime light statistics); n_pixels (total number pixels); prop_non_na_pixels proportion two. (Default: TRUE).","code":""},{"path":"/index.html","id":"black-marble-resources-","dir":"","previous_headings":"","what":"Black Marble Resources","title":"Black Marble Data and Statistics","text":"information NASA Black Marble, see: Academic paper Substack Post Webinar","code":""},{"path":"/reference/add_n_pixels.html","id":null,"dir":"Reference","previous_headings":"","what":"Add pixel information to extracted data — add_n_pixels","title":"Add pixel information to extracted data — add_n_pixels","text":"function calculates additional pixel information extracted data frames.","code":""},{"path":"/reference/add_n_pixels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add pixel information to extracted data — add_n_pixels","text":"","code":"add_n_pixels(roi_df, bm_r, roi_sf, quiet)"},{"path":"/reference/add_n_pixels.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add pixel information to extracted data — add_n_pixels","text":"roi_df Data frame containing extracted data. bm_r raster data. roi_sf spatial features representing regions interest. quiet Logical indicating whether show progress messages.","code":""},{"path":"/reference/add_n_pixels.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add pixel information to extracted data — add_n_pixels","text":"input data frame added columns pixel information.","code":""},{"path":"/reference/add_n_pixels.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add pixel information to extracted data — add_n_pixels","text":"","code":"if (FALSE) { # Adding pixel information to extracted data add_n_pixels(roi_df, bm_r, roi_sf, quiet = FALSE) }"},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"Apply scaling factor variables according Black Marble user guide. scaling factor 0.1 specific VIIRS variables.","code":""},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"","code":"apply_scaling_factor_to_viirs_data(x, variable, quiet = TRUE)"},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"x numeric vector matrix representing VIIRS data. variable character string specifying variable name. quiet Logical, TRUE, suppresses warnings variable found scaling variables.","code":""},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"numeric vector matrix scaling factor applied specified variables.","code":""},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"function applies scaling factor 0.1 specific VIIRS variables according Black Marble user guide. following VIIRS variables affected: DNB_At_Sensor_Radiance (VNP46A1) DNB_BRDF-Corrected_NTL (VNP46A2) Gap_Filled_DNB_BRDF-Corrected_NTL (VNP46A2) DNB_Lunar_Irradiance (VNP46A2) AllAngle_Composite_Snow_Covered (VNP46A3/4) AllAngle_Composite_Snow_Covered_Std (VNP46A3/4) AllAngle_Composite_Snow_Free (VNP46A3/4) AllAngle_Composite_Snow_Free_Std (VNP46A3/4) NearNadir_Composite_Snow_Covered (VNP46A3/4) NearNadir_Composite_Snow_Covered_Std (VNP46A3/4) NearNadir_Composite_Snow_Free (VNP46A3/4) NearNadir_Composite_Snow_Free_Std (VNP46A3/4) OffNadir_Composite_Snow_Covered (VNP46A3/4) OffNadir_Composite_Snow_Covered_Std (VNP46A3/4) OffNadir_Composite_Snow_Free (VNP46A3/4) OffNadir_Composite_Snow_Free_Std (VNP46A3/4)","code":""},{"path":"/reference/apply_scaling_factor_to_viirs_data.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply Scaling Factor to VIIRS Data — apply_scaling_factor_to_viirs_data","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/bind_extracted_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Bind extracted data frames — bind_extracted_data","title":"Bind extracted data frames — bind_extracted_data","text":"function binds together extracted data frames list extracted data frames.","code":""},{"path":"/reference/bind_extracted_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bind extracted data frames — bind_extracted_data","text":"","code":"bind_extracted_data(extracted_data_list)"},{"path":"/reference/bind_extracted_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bind extracted data frames — bind_extracted_data","text":"extracted_data_list One extracted data frames list extracted data frames.","code":""},{"path":"/reference/bind_extracted_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bind extracted data frames — bind_extracted_data","text":"single data frame containing bound extracted data.","code":""},{"path":"/reference/bind_extracted_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bind extracted data frames — bind_extracted_data","text":"","code":"if (FALSE) { # Binding extracted data frames bind_extracted_data(df1, df2)  # Binding a list of extracted data frames bind_extracted_data(list_of_dfs) }"},{"path":"/reference/black_marble_tiles_sf.html","id":null,"dir":"Reference","previous_headings":"","what":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"Spatial dataset containing black marble tiles obtained NASA's Black Marble project.","code":""},{"path":"/reference/black_marble_tiles_sf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"","code":"black_marble_tiles_sf"},{"path":"/reference/black_marble_tiles_sf.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"spatial dataframe (sf) 648 rows 2 columns: TileID Identification tile associated VIIRS satellites mapping. geometry Spatial geometry representing tile boundaries.","code":""},{"path":"/reference/black_marble_tiles_sf.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"https://blackmarble.gsfc.nasa.gov/ dataset obtained Black Marble project NASA, specifically VIIRS (Visible Infrared Imaging Radiometer Suite) satellites. TileID column represents identification tile associated VIIRS satellites mapping. details dataset characteristics, refer Black Marble User Guide: https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/black_marble_tiles_sf.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"Tan, Bin, et al. \"Night-time light imagery analysis urban population mapping China.\" International Journal Remote Sensing 27.9 (2006): 1943-1950. Wolfe, Robert E., et al. \"Achieving accuracy requirements forest biomass mapping: data fusion method combining strengths spaceborne lidar Landsat TM data.\" Remote Sensing Environment 80.2 (2002): 253-267.","code":""},{"path":[]},{"path":"/reference/black_marble_tiles_sf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Black Marble Tiles Spatial Data — black_marble_tiles_sf","text":"","code":"head(black_marble_tiles_sf) #> Simple feature collection with 6 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: -180 ymin: 30.00012 xmax: -170 ymax: 90.00012 #> Geodetic CRS:  WGS 84 #> # A tibble: 6 × 2 #>   TileID                                                                geometry #>   <chr>                                                            <POLYGON [°]> #> 1 h00v00 ((-180 90.00012, -170 90.00012, -170 80.00012, -180 80.00012, -180 90.… #> 2 h00v01 ((-180 80.00012, -170 80.00012, -170 70.00012, -180 70.00012, -180 80.… #> 3 h00v02 ((-180 70.00012, -170 70.00012, -170 60.00012, -180 60.00012, -180 70.… #> 4 h00v03 ((-180 60.00012, -170 60.00012, -170 50.00012, -180 50.00012, -180 60.… #> 5 h00v04 ((-180 50.00012, -170 50.00012, -170 40.00012, -180 40.00012, -180 50.… #> 6 h00v05 ((-180 40.00012, -170 40.00012, -170 30.00012, -180 30.00012, -180 40.…"},{"path":"/reference/bm_extract.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract and process raster data for individual dates — bm_extract","title":"Extract and process raster data for individual dates — bm_extract","text":"function extracts processes raster data individual dates.","code":""},{"path":"/reference/bm_extract.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract and process raster data for individual dates — bm_extract","text":"","code":"bm_extract(   roi_sf,   product_id,   date,   bearer,   aggregation_fun = c(\"mean\"),   add_n_pixels = TRUE,   variable = NULL,   quality_flags_to_remove = NULL,   check_all_tiles_exist = TRUE,   interpol_na = FALSE,   output_location_type = \"memory\",   file_dir = NULL,   file_prefix = NULL,   file_skip_if_exists = TRUE,   quiet = FALSE,   ... )"},{"path":"/reference/bm_extract.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract and process raster data for individual dates — bm_extract","text":"roi_sf spatial features representing regions interest. product_id product ID. date date. bearer bearer. aggregation_fun function aggregate data. add_n_pixels Logical indicating whether compute additional pixel information. variable variable. quality_flags_to_remove quality flags remove. check_all_tiles_exist Logical indicating whether check tiles exist. interpol_na Logical indicating whether interpolate missing values. output_location_type type output location. file_dir directory save files. file_prefix prefix file names. file_skip_if_exists Logical indicating whether skip saving files exist. quiet Logical indicating whether suppress messages. ... Additional arguments passed helper functions.","code":""},{"path":"/reference/bm_extract.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract and process raster data for individual dates — bm_extract","text":"data frame containing extracted processed raster data.","code":""},{"path":"/reference/bm_extract.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract and process raster data for individual dates — bm_extract","text":"","code":"if (FALSE) { bm_extract(roi_sf = my_roi_sf, product_id = \"my_product\", date = \"2024-04-02\", bearer = \"my_bearer\") }"},{"path":"/reference/bm_raster.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract and Aggregate Black Marble Data — bm_raster","title":"Extract and Aggregate Black Marble Data — bm_raster","text":"Extract aggregate nighttime lights data NASA Black Marble data.","code":""},{"path":"/reference/bm_raster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract and Aggregate Black Marble Data — bm_raster","text":"","code":"bm_raster(   roi_sf,   product_id,   date,   bearer,   variable = NULL,   quality_flags_to_remove = NULL,   check_all_tiles_exist = TRUE,   interpol_na = FALSE,   output_location_type = \"memory\",   file_dir = NULL,   file_prefix = NULL,   file_skip_if_exists = TRUE,   quiet = FALSE,   ... )"},{"path":"/reference/bm_raster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract and Aggregate Black Marble Data — bm_raster","text":"roi_sf Region interest; sf polygon. Must WGS 84 (epsg:4326) coordinate reference system. product_id One following: \"VNP46A1\": Daily (raw) \"VNP46A2\": Daily (corrected) \"VNP46A3\": Monthly \"VNP46A4\": Annual date Date raster data. Entering one date produce raster. Entering multiple dates produce raster stack. product_ids \"VNP46A1\" \"VNP46A2\", date (e.g., \"2021-10-03\"). product_id \"VNP46A3\", date year-month (e.g., \"2021-10-01\", day ignored, \"2021-10\"). product_id \"VNP46A4\", year date (e.g., \"2021-10-01\", month day ignored, 2021). bearer NASA bearer token. instructions create token, see . variable Variable used create raster (default: NULL). NULL, uses following default variables: product_id \":VNP46A1\", uses DNB_At_Sensor_Radiance_500m. product_id \"VNP46A2\", uses Gap_Filled_DNB_BRDF-Corrected_NTL. product_ids \"VNP46A3\" \"VNP46A4\", uses NearNadir_Composite_Snow_Free. information variable choices, see ; VNP46A1, see Table 3; VNP46A2 see Table 6; VNP46A3 VNP46A4, see Table 9. quality_flags_to_remove Quality flag values use set values NA. pixel quality flag value, low quality values can removed. Values set NA value ther quality_flag_rm vector. (Default: NULL). VNP46A1 VNP46A2 (daily data): 0: High-quality, Persistent nighttime lights 1: High-quality, Ephemeral nighttime Lights 2: Poor-quality, Outlier, potential cloud contamination, issues VNP46A3 VNP46A4 (monthly annual data): 0: Good-quality, number observations used composite larger 3 1: Poor-quality, number observations used composite less equal 3 2: Gap filled NTL based historical data check_all_tiles_exist Check whether Black Marble nighttime light tiles exist region interest. Sometimes tiles available, full region interest may covered. TRUE, skips cases tiles available. (Default: TRUE). interpol_na data one date downloaded, whether interpolate NA values rasters using raster::approxNA function. Additional arguments raster::approxNA function can also passed bm_extract (eg, method, rule, f, ties, z, NA_rule). (Default: FALSE). output_location_type produce output; either memory file. memory, functions returns dataframe R. file, function exports .csv file returns NULL. file_dir (output_location_type = file). directory data exported (default: NULL, working directory used) file_prefix (output_location_type = file). Prefix add file saved. file saved following: file_prefix_tdate.csv file_skip_if_exists (output_location_type = file). Whether function first check wither file already exists, skip downloading extracting data data date file already exists (default: TRUE). quiet Suppress output show downloading progress messages. (Default: FALSE). ... Additional arguments raster::approxNA, interpol_na = TRUE","code":""},{"path":"/reference/bm_raster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract and Aggregate Black Marble Data — bm_raster","text":"Raster","code":""},{"path":"/reference/bm_raster.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract and Aggregate Black Marble Data — bm_raster","text":"","code":"if (FALSE) { # Define bearer token bearer <- \"BEARER-TOKEN-HERE\"  # sf polygon of Ghana library(geodata) roi_sf <- gadm(country = \"GHA\", level = 1, path = tempdir()) %>% st_as_sf()  # Daily data: raster for October 3, 2021 ken_20210205_r <- bm_raster(   roi_sf = roi_sf,   product_id = \"VNP46A2\",   date = \"2021-10-03\",   bearer = bearer )  # Monthly data: raster for March 2021 ken_202103_r <- bm_raster(   roi_sf = roi_sf,   product_id = \"VNP46A3\",   date = \"2021-03-01\",   bearer = bearer )  # Annual data: raster for 2021 ken_2021_r <- bm_raster(   roi_sf = roi_sf,   product_id = \"VNP46A4\",   date = 2021,   bearer = bearer ) }"},{"path":"/reference/clean_raster_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean Raster Data — clean_raster_data","title":"Clean Raster Data — clean_raster_data","text":"function cleans raster data removing fill values applying scaling factors.","code":""},{"path":"/reference/clean_raster_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean Raster Data — clean_raster_data","text":"","code":"clean_raster_data(raster_obj, variable_name)"},{"path":"/reference/clean_raster_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean Raster Data — clean_raster_data","text":"raster_obj raster object cleaned. variable_name character string specifying variable name.","code":""},{"path":"/reference/clean_raster_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean Raster Data — clean_raster_data","text":"cleaned raster object.","code":""},{"path":"/reference/clean_raster_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clean Raster Data — clean_raster_data","text":"function removes fill values applies scaling factors specified variable raster object.","code":""},{"path":[]},{"path":"/reference/convert_h5_to_raster.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert HDF5 File to Raster — convert_h5_to_raster","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"Converts HDF5 file raster object.","code":""},{"path":"/reference/convert_h5_to_raster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"","code":"convert_h5_to_raster(   download_path,   blackmarble_variable,   quality_flags_to_remove = numeric() )"},{"path":"/reference/convert_h5_to_raster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"download_path character string representing download path HDF5 file. blackmarble_variable character string specifying blackmarble_variable name extract HDF5 file. quality_flags_to_remove numeric vector containing quality flag values removed data (optional).","code":""},{"path":"/reference/convert_h5_to_raster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"raster object containing extracted variable data HDF5 file.","code":""},{"path":"/reference/convert_h5_to_raster.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"function converts HDF5 file raster object. extracts specified variable HDF5 file optionally removes specific quality flag values data.","code":""},{"path":"/reference/convert_h5_to_raster.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Convert HDF5 File to Raster — convert_h5_to_raster","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/count_n_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Count Observations for Exact Extract — count_n_obs","title":"Count Observations for Exact Extract — count_n_obs","text":"Counts observations variable, considering coverage fraction, use exact_extract.","code":""},{"path":"/reference/count_n_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count Observations for Exact Extract — count_n_obs","text":"","code":"count_n_obs(values)"},{"path":"/reference/count_n_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count Observations for Exact Extract — count_n_obs","text":"values data frame containing values.","code":""},{"path":"/reference/count_n_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count Observations for Exact Extract — count_n_obs","text":"data frame count non-NA pixels total pixels variable.","code":""},{"path":"/reference/count_n_obs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Count Observations for Exact Extract — count_n_obs","text":"function counts observations variable provided data frame, considering coverage fraction, use exact_extract. calculates number non-NA pixels total pixels variable. coverage_fraction parameter included function's signature currently used calculation.","code":""},{"path":"/reference/create_black_marble_dataset_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"Creates data frame containing Black Marble dataset filenames based specified parameters.","code":""},{"path":"/reference/create_black_marble_dataset_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"","code":"create_black_marble_dataset_df(   product_id,   all = TRUE,   years = NULL,   months = NULL,   days = NULL )"},{"path":"/reference/create_black_marble_dataset_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"product_id product ID specifying type Black Marble data. Logical; indicating whether create filenames available data specific years, months, days (default: TRUE). years numeric vector specifying years create filenames (optional). months numeric vector specifying months create filenames (optional). days numeric vector specifying days create filenames (optional).","code":""},{"path":"/reference/create_black_marble_dataset_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"data frame containing filenames Black Marble datasets based specified parameters.","code":""},{"path":"/reference/create_black_marble_dataset_df.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"function generates data frame filenames Black Marble datasets. allows filtering year, month, day based provided parameters. Depending product_id, generates filenames daily, monthly, yearly data. generated filenames based specified product ID, year, day month. resulting data frame includes columns year day month, depending type data.","code":""},{"path":"/reference/create_black_marble_dataset_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Black Marble Dataset DataFrame — create_black_marble_dataset_df","text":"","code":"if (FALSE) { # Generate filenames for all available Black Marble data all_data <- create_black_marble_dataset_df(\"VNP46A1\")  # Generate filenames for Black Marble data for specific years and months specific_data <- create_black_marble_dataset_df(\"VNP46A2\", years = c(2018, 2019), months = 1:6) }"},{"path":"/reference/create_raster_from_data_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","title":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","text":"function creates raster object provided data metadata using terra package.","code":""},{"path":"/reference/create_raster_from_data_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","text":"","code":"create_raster_from_data_metadata(data, metadata)"},{"path":"/reference/create_raster_from_data_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","text":"data data matrix raster. metadata list containing metadata information including nodata value, bounding box coordinates, coordinate reference system (CRS).","code":""},{"path":"/reference/create_raster_from_data_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","text":"raster object created input data metadata.","code":""},{"path":"/reference/create_raster_from_data_metadata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Raster Object from Data and Metadata using terra — create_raster_from_data_metadata","text":"function transposes input data, assigns nodata values NA, creates extent class bounding box coordinates, finally creates raster object given data, extent, CRS.","code":""},{"path":"/reference/custom_inform.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom Inform Function — custom_inform","title":"Custom Inform Function — custom_inform","text":"function prints information message quiet set FALSE.","code":""},{"path":"/reference/custom_inform.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom Inform Function — custom_inform","text":"","code":"custom_inform(message, quiet = FALSE)"},{"path":"/reference/custom_inform.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Custom Inform Function — custom_inform","text":"message message printed. quiet Logical indicating whether suppress printing message. Default FALSE.","code":""},{"path":"/reference/custom_inform.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Custom Inform Function — custom_inform","text":"","code":"if (FALSE) { custom_inform(\"This is an information message.\", quiet = FALSE) custom_inform(\"This message will not be printed.\", quiet = TRUE) }"},{"path":"/reference/define_blackmarble_variable.html","id":null,"dir":"Reference","previous_headings":"","what":"Define Black Marble Variable — define_blackmarble_variable","title":"Define Black Marble Variable — define_blackmarble_variable","text":"Defines variable based Black Marble product ID NULL.","code":""},{"path":"/reference/define_blackmarble_variable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define Black Marble Variable — define_blackmarble_variable","text":"","code":"define_blackmarble_variable(variable, product_id)"},{"path":"/reference/define_blackmarble_variable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define Black Marble Variable — define_blackmarble_variable","text":"variable character string specifying variable define. product_id character string representing product ID.","code":""},{"path":"/reference/define_blackmarble_variable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define Black Marble Variable — define_blackmarble_variable","text":"character string representing defined variable.","code":""},{"path":"/reference/define_blackmarble_variable.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Define Black Marble Variable — define_blackmarble_variable","text":"function defines variable based provided Black Marble product ID variable NULL. checks product ID valid assigns default variable based product ID variable NULL. default variables product ID follows: VNP46A1: \"DNB_At_Sensor_Radiance_500m\" VNP46A2: \"Gap_Filled_DNB_BRDF-Corrected_NTL\" VNP46A3 VNP46A4: \"NearNadir_Composite_Snow_Free\"","code":""},{"path":"/reference/define_raster_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Define Raster Name by Date — define_raster_name","title":"Define Raster Name by Date — define_raster_name","text":"Generates name raster based given date product ID.","code":""},{"path":"/reference/define_raster_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define Raster Name by Date — define_raster_name","text":"","code":"define_raster_name(date_string, product_id)"},{"path":"/reference/define_raster_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define Raster Name by Date — define_raster_name","text":"date_string character string representing date format \"YYYY-MM-DD\". product_id character string representing product ID (e.g., \"VNP46A1\", \"VNP46A2\").","code":""},{"path":"/reference/define_raster_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define Raster Name by Date — define_raster_name","text":"character string representing generated raster name.","code":""},{"path":"/reference/define_raster_name.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Define Raster Name by Date — define_raster_name","text":"function generates name raster based provided date product ID. raster name format depends product ID follows: VNP46A1: raster name simply product ID. VNP46A2: raster name starts \"t\" followed date string hyphens replaced underscores. VNP46A3: raster name starts \"t\" followed year month extracted date string. VNP46A4: raster name starts \"t\" followed year extracted date string.","code":""},{"path":"/reference/download_and_convert_raster.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and Convert Raster Data — download_and_convert_raster","title":"Download and Convert Raster Data — download_and_convert_raster","text":"Downloads raster data NASA's LADSWeb converts raster object.","code":""},{"path":"/reference/download_and_convert_raster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and Convert Raster Data — download_and_convert_raster","text":"","code":"download_and_convert_raster(   file_name,   temp_dir,   blackmarble_variable,   bearer,   quality_flags_to_remove = numeric(),   quiet = FALSE )"},{"path":"/reference/download_and_convert_raster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and Convert Raster Data — download_and_convert_raster","text":"file_name character string representing name file download. temp_dir character string specifying temporary directory file saved. blackmarble_variable character string specifying variable extract raster data. bearer character string containing authorization token accessing NASA's LADSWeb. quality_flags_to_remove numeric vector containing quality flag values removed data (optional). quiet Logical; indicating whether suppress progress messages (default: FALSE).","code":""},{"path":"/reference/download_and_convert_raster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and Convert Raster Data — download_and_convert_raster","text":"raster object containing downloaded processed raster data.","code":""},{"path":"/reference/download_and_convert_raster.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download and Convert Raster Data — download_and_convert_raster","text":"function downloads raster data NASA's LADSWeb based provided file name. converts downloaded data raster object, extracting specified variable removing quality flag values specified. function also provides option suppress progress messages.","code":""},{"path":"/reference/download_and_convert_raster.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Download and Convert Raster Data — download_and_convert_raster","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/download_h5_viirs_sat_image.html","id":null,"dir":"Reference","previous_headings":"","what":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","title":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","text":"Downloads VIIRS satellite image HDF5 format NASA's LADSWeb saves temporary directory persistent location.","code":""},{"path":"/reference/download_h5_viirs_sat_image.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","text":"","code":"download_h5_viirs_sat_image(   file_name,   download_path,   bearer,   quality_flags_to_remove = numeric(),   quiet = FALSE )"},{"path":"/reference/download_h5_viirs_sat_image.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","text":"file_name character string representing name file download. download_path character string representing path save downloaded file. bearer character string containing authorization token accessing NASA's LADSWeb. quality_flags_to_remove numeric vector containing quality flag values removed data (optional). quiet Logical; indicating whether suppress progress messages (default: FALSE).","code":""},{"path":"/reference/download_h5_viirs_sat_image.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","text":"function downloads VIIRS satellite image HDF5 format NASA's LADSWeb based provided file name. processes downloaded data, removing quality flag values specified. function also provides option suppress progress messages.","code":""},{"path":"/reference/download_h5_viirs_sat_image.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Download VIIRS Satellite Image in HDF5 Format — download_h5_viirs_sat_image","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/extract_and_process.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract and process raster data — extract_and_process","title":"Extract and process raster data — extract_and_process","text":"function extracts processes raster data either single raster multiple rasters.","code":""},{"path":"/reference/extract_and_process.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract and process raster data — extract_and_process","text":"","code":"extract_and_process(   bm_r,   roi_sf,   fun,   add_n_pixels = TRUE,   quiet = FALSE,   is_single = FALSE )"},{"path":"/reference/extract_and_process.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract and process raster data — extract_and_process","text":"bm_r raster data. roi_sf spatial features representing regions interest. fun function apply raster data extraction processing. add_n_pixels Logical indicating whether compute additional pixel information. quiet Logical indicating whether show progress messages. is_single Logical indicating whether single raster processed. Default FALSE.","code":""},{"path":"/reference/extract_and_process.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract and process raster data — extract_and_process","text":"data frame containing extracted processed raster data.","code":""},{"path":"/reference/extract_and_process.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract and process raster data — extract_and_process","text":"function extracts raster data specified regions interest (roi_sf) processes using specified function (fun). can handle single raster multiple raster inputs.","code":""},{"path":"/reference/extract_and_process.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract and process raster data — extract_and_process","text":"","code":"if (FALSE) { # For a single raster extract_and_process(raster = my_raster, roi_sf = my_roi_sf, fun = mean, is_single = TRUE,                     add_n_pixels = TRUE, quiet = FALSE)  # For multiple rasters extract_and_process(raster = my_raster, roi_sf = my_roi_sf, fun = mean) }"},{"path":"/reference/extract_bounding_box.html","id":null,"dir":"Reference","previous_headings":"","what":"Extracts bounding box coordinates based on tile ID from the file path — extract_bounding_box","title":"Extracts bounding box coordinates based on tile ID from the file path — extract_bounding_box","text":"code snippet extracts bounding box coordinates (minimum longitude, minimum latitude, maximum longitude, maximum latitude) based tile ID extracted file path. uses file_path extract tile ID, retrieves corresponding grid black_marble_tiles_sf dataset. Finally, calculates bounding box grid rounds coordinates.","code":""},{"path":"/reference/extract_bounding_box.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extracts bounding box coordinates based on tile ID from the file path — extract_bounding_box","text":"","code":"extract_bounding_box(file_path, black_marble_tiles_sf)"},{"path":"/reference/extract_bounding_box.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extracts bounding box coordinates based on tile ID from the file path — extract_bounding_box","text":"file_path character string specifying file path. black_marble_tiles_sf spatial dataset containing grid tiles information.","code":""},{"path":"/reference/extract_bounding_box.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extracts bounding box coordinates based on tile ID from the file path — extract_bounding_box","text":"list containing minimum maximum longitude latitude coordinates bounding box.","code":""},{"path":"/reference/extract_daily_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Daily Data from HDF5 File — extract_daily_data","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"function extracts daily data HDF5 file based provided file path variable name.","code":""},{"path":"/reference/extract_daily_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"","code":"extract_daily_data(   download_file_path,   h5_data,   blackmarble_variable,   quality_flags_to_remove )"},{"path":"/reference/extract_daily_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"download_file_path character string specifying file path. h5_data HDF5 file data. blackmarble_variable character string specifying variable name. quality_flags_to_remove numeric vector containing quality flag values removed data.","code":""},{"path":"/reference/extract_daily_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"list containing extracted data metadata.","code":""},{"path":"/reference/extract_daily_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"function extracts daily data HDF5 file specified variable. retrieves data applies quality flag removal specified. Additionally, calculates bounding box coordinates based tile ID extracted file path.","code":""},{"path":"/reference/extract_daily_data.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Extract Daily Data from HDF5 File — extract_daily_data","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"function extracts data metadata HDF5 file.","code":""},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"","code":"extract_data_and_metadata_from_hdf5(   h5_data,   download_path,   blackmarble_variable,   quality_flags_to_remove )"},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"h5_data HDF5 file data. download_path character string specifying path downloaded file. blackmarble_variable character string specifying variable name. quality_flags_to_remove numeric vector containing quality flag values removed data.","code":""},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"list containing extracted data metadata.","code":""},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"function extracts data metadata HDF5 file based specified file path variable name. Depending file path pattern (daily monthly/annually), calls different functions extract data. Quality flag values specified quality_flags_to_remove removed data.","code":""},{"path":"/reference/extract_data_and_metadata_from_hdf5.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Extract Data and Metadata from HDF5 File — extract_data_and_metadata_from_hdf5","text":"Black Marble User Guide - https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf","code":""},{"path":"/reference/extract_monthly_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Monthly Data from HDF5 File — extract_monthly_data","title":"Extract Monthly Data from HDF5 File — extract_monthly_data","text":"function extracts monthly data HDF5 file.","code":""},{"path":"/reference/extract_monthly_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Monthly Data from HDF5 File — extract_monthly_data","text":"","code":"extract_monthly_data(   download_file_path,   h5_data,   blackmarble_variable,   quality_flags_to_remove )"},{"path":"/reference/extract_monthly_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Monthly Data from HDF5 File — extract_monthly_data","text":"download_file_path Path downloaded HDF5 file. h5_data HDF5 data. blackmarble_variable variable extract HDF5 data. quality_flags_to_remove Quality flag values set NA.","code":""},{"path":"/reference/extract_monthly_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Monthly Data from HDF5 File — extract_monthly_data","text":"list containing extracted data bounding box coordinates.","code":""},{"path":"/reference/extract_monthly_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Monthly Data from HDF5 File — extract_monthly_data","text":"","code":"if (FALSE) { # Extract monthly data data <- extract_monthly_data(download_file_path, h5_data, blackmarble_variable, quality_flags_to_remove) }"},{"path":"/reference/intersect_bm_tiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","title":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","text":"function intersects Black Marble tiles region interest, removing grid along edges avoid issues st_intersects.","code":""},{"path":"/reference/intersect_bm_tiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","text":"","code":"intersect_bm_tiles(black_marble_tiles_sf, roi_sf)"},{"path":"/reference/intersect_bm_tiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","text":"black_marble_tiles_sf Spatial object representing Black Marble tiles. roi_sf Spatial object representing region interest.","code":""},{"path":"/reference/intersect_bm_tiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","text":"Spatial object containing Black Marble tiles intersecting region interest.","code":""},{"path":"/reference/intersect_bm_tiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Intersect Black Marble Tiles with Region of Interest — intersect_bm_tiles","text":"","code":"if (FALSE) { # Load required libraries library(sf)  # Create example data black_marble_tiles_sf <- st_read(\"path_to_black_marble_tiles_shapefile\") roi_sf <- st_read(\"path_to_roi_shapefile\")  # Intersect Black Marble tiles with region of interest intersected_tiles <- intersect_bm_tiles(black_marble_tiles_sf, roi_sf) }"},{"path":"/reference/julian_to_month.html","id":null,"dir":"Reference","previous_headings":"","what":"Translate Julian Dates to Regular Month Representation — julian_to_month","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"function translates Julian dates regular month representations.","code":""},{"path":"/reference/julian_to_month.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"","code":"julian_to_month(julian_date)"},{"path":"/reference/julian_to_month.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"julian_date character string representing day year Julian format (e.g., \"001\" January 1st).","code":""},{"path":"/reference/julian_to_month.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"number representing month corresponding given Julian date (e.g., 1 January).","code":""},{"path":"/reference/julian_to_month.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"information Julian day system, see: https://en.wikipedia.org/wiki/Julian_day","code":""},{"path":"/reference/julian_to_month.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Translate Julian Dates to Regular Month Representation — julian_to_month","text":"","code":"if (FALSE) { julian_to_month(\"001\") # [1] 1  julian_to_month(\"032\") # [1] 2 }"},{"path":"/reference/map_black_marble_tiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Black Marble Tiles — map_black_marble_tiles","title":"Map Black Marble Tiles — map_black_marble_tiles","text":"Generate interactive map displaying black marble tiles using Leaflet.","code":""},{"path":"/reference/map_black_marble_tiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Black Marble Tiles — map_black_marble_tiles","text":"","code":"map_black_marble_tiles()"},{"path":"/reference/map_black_marble_tiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Black Marble Tiles — map_black_marble_tiles","text":"interactive Leaflet map object.","code":""},{"path":"/reference/map_black_marble_tiles.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map Black Marble Tiles — map_black_marble_tiles","text":"function requires leaflet package generating interactive maps. function generates interactive map displaying black marble tiles obtained NASA's Black Marble project using Leaflet library. map includes black marble tiles overlaid base map, marker indicating center coordinates (latitude longitude).","code":""},{"path":"/reference/map_black_marble_tiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map Black Marble Tiles — map_black_marble_tiles","text":"","code":"if (FALSE) { library(leaflet) # Generate the map map_black_marble_tiles()  }"},{"path":"/reference/process_tiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Process Tiles — process_tiles","title":"Process Tiles — process_tiles","text":"Processes satellite imagery tiles based specified parameters.","code":""},{"path":"/reference/process_tiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process Tiles — process_tiles","text":"","code":"process_tiles(   bm_files_df,   grid_use_sf,   check_all_tiles_exist,   temp_dir,   product_id,   blackmarble_variable,   bearer,   quality_flags_to_remove,   quiet )"},{"path":"/reference/process_tiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process Tiles — process_tiles","text":"bm_files_df data frame containing Black Marble dataset filenames. grid_use_sf spatial grid containing TileIDs. check_all_tiles_exist Logical; indicating whether check tiles exist (default: TRUE). temp_dir character string specifying temporary directory. product_id character string representing product ID. blackmarble_variable character string specifying Black Marble variable. bearer character string containing authorization token accessing NASA's LADSWeb. quality_flags_to_remove numeric vector containing quality flag values removed data (optional). quiet Logical; indicating whether suppress progress messages (default: FALSE).","code":""},{"path":"/reference/process_tiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process Tiles — process_tiles","text":"raster object processed satellite imagery tiles.","code":""},{"path":"/reference/read_black_marble_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Black Marble CSV Data — read_black_marble_csv","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"Reads Black Marble CSV data specific year day.","code":""},{"path":"/reference/read_black_marble_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"","code":"read_black_marble_csv(year, day, product_id)"},{"path":"/reference/read_black_marble_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"year year data. day day year (1-365 1-366 leap years). product_id product ID specifying type data retrieve.","code":""},{"path":"/reference/read_black_marble_csv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"data frame containing Black Marble CSV data specified year day.","code":""},{"path":"/reference/read_black_marble_csv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"function reads Black Marble CSV data NASA LADS website given year, day, product_id. constructs URL based provided parameters attempts read CSV file using readr::read_csv. successful, adds columns year day data frame. error occurs reading process, returns empty data frame issues warning. Additionally, avoid overloading server rapid requests, function includes small delay (0.1 seconds) consecutive requests using Sys.sleep(0.1).","code":""},{"path":"/reference/read_black_marble_csv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read Black Marble CSV Data — read_black_marble_csv","text":"","code":"if (FALSE) { # Read Black Marble CSV data for the year 2023, day 150, and product ID \"VIIRS_SNPP_CorrectedReflectance_BandM3\" data <- read_black_marble_csv(2023, 150, \"VIIRS_SNPP_CorrectedReflectance_BandM3\") }"},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"function removes artifact values satellite data, replacing NA. Artifact values commonly used satellite data represent fill values, invalid measurements, missing data.","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"","code":"remove_fill_value_from_satellite_data(data, blackmarble_variable)"},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"data matrix data frame containing satellite data. blackmarble_variable character string specifying blackmarble_variable artifact values removed.","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"input data artifact values replaced NA.","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"artifact values corresponding blackmarble_variables based data format described Black Marble User Guide (https://viirsland.gsfc.nasa.gov/PDF/BlackMarbleUserGuide_v1.2_20220916.pdf).","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"-table-page-","dir":"Reference","previous_headings":"","what":"* Table 3 (page 12)","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"Table 6 (page 16) Table 9 (page 18)","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"information artifact values satellite data, refer Black Marble User Guide.","code":""},{"path":"/reference/remove_fill_value_from_satellite_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Artifact Values from Satellite Data — remove_fill_value_from_satellite_data","text":"","code":"if (FALSE) { # Remove artifact values from UTC_Time variable in satellite data cleaned_data <- remove_fill_value_from_satellite_data(satellite_data, \"UTC_Time\") }"},{"path":"/reference/retrieve_and_process_nightlight_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","title":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","text":"Retrieves processes nighttime light raster data Black Marble dataset.","code":""},{"path":"/reference/retrieve_and_process_nightlight_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","text":"","code":"retrieve_and_process_nightlight_data(   roi_sf,   product_id,   date,   bearer,   blackmarble_variable,   quality_flags_to_remove,   check_all_tiles_exist = TRUE,   quiet = FALSE,   temp_dir )"},{"path":"/reference/retrieve_and_process_nightlight_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","text":"roi_sf sf object representing region interest. product_id character string specifying product ID. date character string representing date. bearer character string representing authorization bearer token. blackmarble_variable character string specifying blackmarble_variable extract. quality_flags_to_remove numeric vector containing quality flag values removed data (optional). check_all_tiles_exist logical value indicating whether check satellite imagery tiles location exist (default TRUE). quiet logical value indicating whether suppress progress messages (default FALSE). temp_dir character string representing temporary directory path.","code":""},{"path":"/reference/retrieve_and_process_nightlight_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","text":"raster object containing processed nighttime light data.","code":""},{"path":"/reference/retrieve_and_process_nightlight_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Retrieve and Process Nightlight Data — retrieve_and_process_nightlight_data","text":"function retrieves processes nighttime light raster data Black Marble dataset. downloads data specified region interest date, removes quality-flagged pixels specified, mosaics tiles together necessary. crops raster region interest.","code":""}]
